{"version":3,"sources":["functions/coupon.js","pages/admin/coupon/CreateCoupon.js"],"names":["getCoupons","a","axios","get","process","deleteCoupon","authtoken","coupon_id","delete","headers","createCoupon","coupon","post","CreateCoupon","useState","name","setName","Date","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadCoupons","then","res","data","handleSubmit","e","preventDefault","console","log","token","toast","success","catch","err","className","AdminNav","onSubmit","type","value","onChange","target","autoFocus","selected","date","required","onClick","length","map","c","_id","error","style","cursor","DeleteOutlined"],"mappings":"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","file":"static/js/44.0b9b5b66.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const getCoupons = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\r\n\r\nexport const deleteCoupon = async (authtoken, coupon_id) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${coupon_id}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCoupon = async (authtoken, coupon) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/coupon`, coupon, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  createCoupon,\r\n  deleteCoupon,\r\n  getCoupons,\r\n} from \"../../../functions/coupon\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Spin } from \"antd\";\r\n\r\nconst CreateCoupon = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [expiry, setExpiry] = useState(new Date());\r\n  const [discount, setDiscount] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [coupons, setCoupons] = useState([]);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadCoupons();\r\n  }, []);\r\n\r\n  const loadCoupons = () => {\r\n    setLoading(false);\r\n    getCoupons().then((res) => {\r\n      setCoupons(res.data);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n    console.log(name, expiry, discount);\r\n\r\n    createCoupon(user.token, { name, expiry, discount })\r\n      .then((res) => {\r\n        setLoading(true);\r\n        setName(\"\");\r\n        setExpiry(\"\");\r\n        setDiscount(\"\");\r\n        toast.success(`${res.data.name} is created`);\r\n        loadCoupons();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleRemove = (coupon_id) => {\r\n    setLoading(true);\r\n    deleteCoupon(user.token, coupon_id)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        toast.error(`${res.data.name} deleted Successfully`);\r\n        loadCoupons();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n          <h4>Coupon</h4>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Name</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                autoFocus\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Discount %</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"form-control\"\r\n                value={discount}\r\n                onChange={(e) => setDiscount(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Expiry</label>\r\n              <br />\r\n              <DatePicker\r\n                selected={expiry}\r\n                onChange={(date) => setExpiry(date)}\r\n                className=\"form-control\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              className=\"btn btn-primary btn-raised btn-large\"\r\n              onClick={handleSubmit}\r\n            >\r\n              Create Coupon\r\n            </button>\r\n          </form>\r\n           \r\n          {loading ? (\r\n            <Spin className=\"text-center\" />\r\n          ) : (\r\n            <div>\r\n              {coupons.length > 0 &&\r\n                coupons.map((c) => (\r\n                  <div className=\"alert alert-secondary\" key={c._id}>\r\n                    {c.name}\r\n                    <span\r\n                      className=\"float-right\"\r\n                      onClick={() => handleRemove(c._id)}\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      <DeleteOutlined className=\"text-danger\" />\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCoupon;\r\n"],"sourceRoot":""}