{"version":3,"sources":["components/routes/AdminRoute.js","components/routes/LoadingToRedirect.js"],"names":["AdminRoute","children","rest","user","useSelector","state","useState","ok","setOk","useEffect","token","currentAdmin","then","res","console","log","catch","err","LoadingToRedirect","count","setCount","history","useHistory","interval","setInterval","currentCount","push","clearInterval","className"],"mappings":"qMA2BeA,UArBI,SAAC,GAA0B,EAAxBC,SAAyB,IAAZC,EAAW,iBACpCC,EAASC,aAAY,SAACC,GAAD,sBAAiBA,MAAtCF,KACR,EAAoBG,oBAAS,GAA7B,mBAAOC,EAAP,KAAWC,EAAX,KAgBA,OAdAC,qBAAU,WACJN,GAAQA,EAAKO,OACfC,YAAaR,EAAKO,OACfE,MAAK,SAACC,GACLC,QAAQC,IAAI,oBAAqBF,GACjCL,GAAM,MAEPQ,OAAM,SAACC,GACNH,QAAQC,IAAI,kBAAmBE,GAC/BT,GAAM,QAGX,CAACL,IAEGI,EAAK,cAAC,IAAD,eAAWL,IAAW,cAAC,IAAD,M,mECArBgB,IArBW,WACxB,MAA0BZ,mBAAS,GAAnC,mBAAOa,EAAP,KAAcC,EAAd,KACIC,EAAUC,cAYd,OAVAb,qBAAU,WACR,IAAMc,EAAWC,aAAY,WAC3BJ,GAAS,SAACK,GAAD,QAAoBA,OAC5B,KAIH,OAFU,IAAVN,GAAeE,EAAQK,KAAK,KAErB,kBAAMC,cAAcJ,MAC1B,CAACJ,EAAOE,IAGT,qBAAKO,UAAU,4BAAf,SACE,oDAAuBT,EAAvB","file":"static/js/38.d1155520.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport LoadingToRedirect from \"./LoadingToRedirect\";\r\nimport { currentAdmin } from \"../../functions/auth\";\r\n\r\nconst AdminRoute = ({ children, ...rest }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [ok, setOk] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user && user.token) {\r\n      currentAdmin(user.token)\r\n        .then((res) => {\r\n          console.log(\"CURRENT ADMIN RES\", res);\r\n          setOk(true);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"ADMIN ROUTE ERR\", err);\r\n          setOk(false);\r\n        });\r\n    }\r\n  }, [user]);\r\n\r\n  return ok ? <Route {...rest} /> : <LoadingToRedirect />;\r\n};\r\n\r\nexport default AdminRoute;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LoadingToRedirect = () => {\r\n  const [count, setCount] = useState(5);\r\n  let history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCount((currentCount) => --currentCount);\r\n    }, 1000);\r\n    // redirect once count is equal to 0\r\n    count === 0 && history.push(\"/\");\r\n    // cleanup\r\n    return () => clearInterval(interval);\r\n  }, [count, history]);\r\n\r\n  return (\r\n    <div className=\"container p-5 text-center\">\r\n      <p>Redirecting you in {count} seconds</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingToRedirect;\r\n"],"sourceRoot":""}