(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[45],{1401:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(16),s=a(12),c=a(1),o=a(283),i=a(125),l=a(99),u=a(288),b=a(4);t.default=function(e){var t=e.history,a=Object(c.useState)(""),d=Object(s.a)(a,2),m=d[0],p=d[1],j=Object(c.useState)(""),f=Object(s.a)(j,2),h=f[0],O=f[1],g=Object(l.b)();Object(c.useEffect)((function(){p(window.localStorage.getItem("emailForRegistration"))}),[t]);var x=function(){var e=Object(n.a)(Object(r.a)().mark((function e(a){var n,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),m&&h){e.next=4;break}return i.b.error("Email and password is required"),e.abrupt("return");case 4:if(!(h.length<6)){e.next=7;break}return i.b.error("Password must be at least 6 characters long"),e.abrupt("return");case 7:return e.prev=7,e.next=10,o.a.signInWithEmailLink(m,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=22;break}return window.localStorage.removeItem("emailForRegistration"),n=o.a.currentUser,e.next=16,n.updatePassword(h);case 16:return e.next=18,n.getIdTokenResult();case 18:s=e.sent,console.log("user",n,"idTokenResult",s),Object(u.a)(s.token).then((function(e){g({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:s.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){return console.log(e)})),t.push("/");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),i.b.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"container p-5",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(b.jsx)("h4",{children:"Register Complete"}),Object(b.jsxs)("form",{onSubmit:x,children:[Object(b.jsx)("input",{type:"email",className:"form-control",value:m,disabled:!0}),Object(b.jsx)("input",{type:"password",className:"form-control",value:h,onChange:function(e){return O(e.target.value)},placeholder:"Password",autoFocus:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Complete Registration"})]})]})})})}}}]);
//# sourceMappingURL=45.be7679c6.chunk.js.map