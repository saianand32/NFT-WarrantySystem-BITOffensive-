(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[30],{1191:function(e,t,n){},1230:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(1190),c=n(624),s=n(13),o=n.n(s),u=n(31),i=n(46),p=n(19),l=n(37),d=n(25),f=n.n(d),b=function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat("http://52.24.2.108:8000/api","/create-payment-integration"),{couponApplied:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=n(8),j=n(1231),m=n(247),O=n(1247),x=n(630),y=n(225),v=n(9),g=n(237),k=n(2),w=function(){var e=Object(l.c)((function(e){return Object(p.a)({},e)})),t=e.user,n=e.coupon,a=e.pageState,s=e.shippingAdd,d=Object(l.b)(),f=Object(v.f)(),w=Object(r.useState)(!1),S=Object(i.a)(w,2),N=S[0],C=S[1],I=Object(r.useState)(null),A=Object(i.a)(I,2),E=A[0],P=A[1],F=Object(r.useState)(""),D=Object(i.a)(F,2),T=D[0],_=D[1],L=Object(r.useState)(!0),Y=Object(i.a)(L,2),B=Y[0],G=Y[1],J=Object(r.useState)(""),R=Object(i.a)(J,2),z=R[0],H=R[1],W=Object(r.useState)(0),Z=Object(i.a)(W,2),K=Z[0],Q=Z[1],U=Object(r.useState)(0),V=Object(i.a)(U,2),q=V[0],M=V[1],X=Object(r.useState)(0),$=Object(i.a)(X,2),ee=$[0],te=$[1],ne=Object(c.useStripe)(),re=Object(c.useElements)(),ae={shippingAdd:s},ce=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),_(!0),ne&&re){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ne.confirmCardPayment(z,{payment_method:{card:re.getElement(c.CardElement),billing_details:{name:t.name,email:t.email}}});case 6:if(r=e.sent,console.log(s),!r.error){e.next=21;break}return e.t0=P,e.t1="Payment Failed ",e.next=13,r;case 13:e.t2=e.sent.error.message,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)(e.t3),console.log(E),_(!1),e.next=41;break;case 21:if("succeeded"!==r.paymentIntent.status){e.next=36;break}return e.t4=r.paymentIntent.id,e.t5=r.paymentIntent.status,e.next=26,r;case 26:return e.t6=e.sent.paymentIntent,ae.paymentInfo={id:e.t4,status:e.t5,stripeResponse:e.t6},e.t7=console,e.next=31,r;case 31:e.t8=e.sent.paymentIntent,e.t7.log.call(e.t7,e.t8),Object(g.c)(ae,t.token).then((function(e){e.data.ok&&(void 0!==typeof window&&localStorage.removeItem("cart"),void 0!==typeof window&&localStorage.removeItem("shippingAddress"),d({type:"ADD_TO_CART",payload:[]}),d({type:"SHIPPING_ADDRESS",payload:null}),Object(g.d)(t.token),d({type:"COUPON_APPLIED",payload:!1}))})),e.next=37;break;case 36:alert.error("There's some issue while processing payment ");case 37:console.log(r),P(null),_(!1),C(!0);case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t.error?t.error.message:""),G(t.empty);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b(t.token,n).then((function(e){console.log(e.data),H(e.data.clientSecret),Q(e.data.cartTotal),M(e.data.totalAfterDiscount),te(e.data.payable)}))}),[]),Object(k.jsx)(k.Fragment,{children:a?Object(k.jsxs)("form",{id:"payment-form",className:"stripe-form",onSubmit:ce,children:[!N&&Object(k.jsx)("div",{children:n&&void 0!==q?Object(k.jsxs)("p",{className:"alert alert-success",children:["Coupon Applied. You Save: \u20b9",(K-q).toLocaleString("en-IN")]}):Object(k.jsx)("p",{className:"alert alert-danger",children:"No Coupon Applied"})}),Object(k.jsx)("div",{className:"text-center pb-5",children:Object(k.jsx)(j.a,{cover:Object(k.jsx)("img",{src:y.a,style:{height:"50px",objectFit:"cover",marginBottom:"-50px"}}),actions:[Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.a,{className:"text-info mt-1"}),Object(k.jsx)("br",{})," Total : \u20b9 ",K.toLocaleString("en-IN")]}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(x.a,{className:"text-info mt-1"}),Object(k.jsx)("br",{})," payable: \u20b9 ",(ee/100).toLocaleString("en-IN")]})]})}),Object(k.jsx)(c.CardElement,{id:"card-element",onChange:se,options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}}),Object(k.jsx)("button",{className:"stripe-button",disabled:T||B||T,children:Object(k.jsx)("span",{id:"button-text",children:T?Object(k.jsx)("div",{className:"spinner",id:"sinner"}):"Pay"})}),Object(k.jsx)("br",{}),E?Object(k.jsx)("div",{className:"card-error text-danger",role:"alert",children:E}):" ",Object(k.jsxs)("p",{className:N?"result-message":"result-message hidden",children:["Payment Successful"," ",Object(k.jsx)(m.a,{type:"link",className:N?"result-message":"result-message hidden",onClick:function(){f.push("/user/history"),d({type:"SESSION",payload:!1})},children:"Check Your Order status here"})]})]}):Object(k.jsx)("div",{className:"h-100 w-100",children:Object(k.jsxs)("p",{className:"alert alert-secondary mx-auto my-auto",children:["Session Expired. ",Object(k.jsx)(h.b,{to:"/cart",children:"Try Again."})]})})})},S=(n(1191),Object(a.a)("pk_test_51JzfLZSC0ElNP4bYmxjQ0TKZg9mCmCTWjL1COYjfI9nJaHA16VWC3oGB8Pehw7w3P6FrBOuOFegj5Ywvbb81EOG100BkGmnvo9"));t.default=function(){return Object(k.jsxs)("div",{className:"container p-5 text-center",children:[Object(k.jsx)("h4",{children:"Complete your purchase"}),Object(k.jsx)("p",{className:"text-secondary",children:'"Do not Refresh or Navigate"'}),Object(k.jsx)("p",{className:"text-secondary",children:"For testing purposes :- use Card number as : 4242 4242 4242 4242 "}),Object(k.jsx)(c.Elements,{stripe:S,children:Object(k.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(k.jsx)(w,{})})})]})}},225:function(e,t,n){"use strict";t.a=n.p+"static/media/laptop.0ec78e2c.png"},237:function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return j}));var r=n(13),a=n.n(r),c=n(31),s=n(25),o=n.n(s),u=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("http://52.24.2.108:8000/api","/user/cart"),{cart:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("http://52.24.2.108:8000/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("".concat("http://52.24.2.108:8000/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("http://52.24.2.108:8000/api","/user/cart/coupon"),t,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("http://52.24.2.108:8000/api","/user/order"),{paymentIntent:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("http://52.24.2.108:8000/api","/user/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat("http://52.24.2.108:8000/api","/user/wishlist"),{productId:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat("http://52.24.2.108:8000/api","/user/wishlist"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("".concat("http://52.24.2.108:8000/api","/user/wishlist/").concat(n),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=30.471c48f9.chunk.js.map